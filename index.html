<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
	  <meta name="referrer" content="never">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="http://webapi.amap.com/maps?v=1.3&key=e9c7e4563d02636de6e65515657572ba" type="text/javascript" charset="utf-8"></script>
    <title>zhihu-daily</title>
  </head>
  <script>
  //   document.addEventListener('plusready', function() {
  //     var webview = plus.webview.currentWebview();
  //     plus.key.addEventListener('backbutton', function() {
  //         webview.canBack(function(e) {
  //             if(e.canBack) {
  //                 webview.back(); 
  //               } else {
  //                 webview.close(); //hide,quit
  //                 plus.runtime.quit();
  //                 document.plusReady(function() {
  //                     //首页返回键处理
  //                     //处理逻辑：1秒内，连续两次按返回键，则退出应用；
  //                     var first = null;
  //                     plus.key.addEventListener('backbutton', function() {
  //                         //首次按键，提示‘再按一次退出应用’
  //                         if (!first) {
  //                             first = new Date().getTime();
  //                             alert("再按一次退出应用");
  //                             setTimeout(function() {
  //                                 first = null;
  //                             }, 1000);
  //                         } else {
  //                             if (new Date().getTime() - first < 1500) {
  //                                 plus.runtime.quit();
  //                             }
  //                         }
  //                     }, false);
  //                 });
  //             }
  //         })
  //     });
  // });

    document.addEventListener('plusready', function() {
      var webview = plus.webview.currentWebview();
      plus.key.addEventListener('backbutton', function() {
        webview.canBack(function(e) {
          if(e.canBack) {
            webview.back();
          } else {
            //webview.close(); //hide,quit
            //plus.runtime.quit();
            mui.plusReady(function() {
              //首页返回键处理
              //处理逻辑：1秒内，连续两次按返回键，则退出应用；
              var first = null;
              plus.key.addEventListener('backbutton', function() {
                //首次按键，提示‘再按一次退出应用’
                if (!first) {
                  first = new Date().getTime();
                  mui.toast('再按一次退出应用');
                  setTimeout(function() {
                    first = null;
                  }, 1000);
                } else {
                  if (new Date().getTime() - first < 1500) {
                    plus.runtime.quit();
                  }
                }
              }, false);
            });
          }
        })
      });
    });

  </script>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
